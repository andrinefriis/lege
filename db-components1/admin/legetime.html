<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Registrer forfatter</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="/components/DbUser.js"></script>
    <script src="/components/DbInsert.js"></script>
    <script src="/components/DbList.js"></script>
    <script src="/components/DbTable.js"></script>
    <script src="/components/Homebar.js"></script>
    <link rel="stylesheet" href="/css/admin.css">
</head>

<body>

    <home-bar heading="Legetimer" crumb="legetime" getlinks="/htmlfiler/admin" username="/myself" ">
    </home-bar>
    
    <h1 class=" centered ">Mine Legetimer</h1>
        <div id="admin ">

            <db-insert id="form " fields="dato:date " table="legetime ">
                <span slot="heading ">Bestilling Legetime</span>
                <db-user id="legetimeid " field="legetimeid " label="Legetimenr "></db-user>
            </db-insert>
           

            <div class="table ">
                <db-table connected="kundeid:kundeid " id="legetime " update="legetime " key="legetimeid "
                    fields="legetimeid:number,dato:date " delete="legetime " sql="select * from legetime ">
                    <span slot="caption ">Mine Legetimer</span>
                </db-table>

                <db-insert id="linje " fields="antall " foreign="vare.vareid:navn+pris "
                    connected="legetime:legetimeid " table="linje ">
                    <span slot="heading ">Bestilling av Legetimer</span>
                </db-insert>

                <db-table connected="legetime:legetimeid " fields="linjeid:hidden,navn,antall:int,pris:money "
                    update="linje " delete="linje "
                    sql="select l.*,v.navn,v.pris from linje l inner join vare v on (v.vareid=l .vareid) ">
                    <span slot="caption ">Legetimer</span>
                </db-table>

                <db-table id="total " connected="legetime:legetimeid " fields="total:money " update="linje " sql="select sum(l.antall * v.pris) as total from linje l inner join vare v on (v.vareid=l .vareid) ">
                    <span slot="caption ">Totalsum</span>
                </db-table>

                <db-list cssimport="/css/admin.css " sql="select sum(l.antall * v.pris) as total from linje l inner join vare v on (v.vareid=l .vareid) ">
                    <div class="total ">Totalsummen blir ${total} kr</div>
                </db-list>

            </div>

        </div>

</body>

</html>